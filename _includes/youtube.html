{%- comment -%}
Usage:
  {% include youtube.html id="dQw4w9WgXcQ" %}
  {% include youtube.html url="https://youtu.be/dQw4w9WgXcQ" start="60" title="데모" %}
  {% include youtube.html url="https://www.youtube.com/watch?v=dQw4w9WgXcQ" %}
{%- endcomment -%}

{%- assign _id = include.id | default: '' -%}

{%- if _id == '' and include.url -%}
  {%- assign u = include.url -%}
  {%- if u contains 'youtu.be/' -%}
    {%- assign _id = u | split:'youtu.be/' | last | split:'?' | first | split:'&' | first | split:'#' | first -%}
  {%- elsif u contains 'v=' -%}
    {%- assign _id = u | split:'v=' | last     | split:'&' | first | split:'#' | first -%}
  {%- endif -%}
{%- endif -%}

{%- assign _params = 'rel=0' -%}
{%- if include.start and include.start != '' -%}
  {%- assign _params = _params | append: '&start=' | append: include.start -%}
{%- endif -%}

{%- if _id != '' -%}
  <div class="relative w-full pt-[56.25%] my-6 rounded-xl overflow-hidden shadow">
    <iframe
      class="absolute inset-0 w-full h-full"
      src="https://www.youtube-nocookie.com/embed/{{ _id }}?{{ _params }}"
      title="{{ include.title | default: 'YouTube video' }}"
      frameborder="0"
      loading="lazy"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      allowfullscreen
    ></iframe>
  </div>
{%- else -%}
  <!-- youtube include: no video id resolved -->
{%- endif -%}
