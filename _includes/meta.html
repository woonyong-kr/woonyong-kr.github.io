{%- comment -%}
  Meta / SEO for Jekyll Atlantic
  - OG/트위터 이미지는 show_og (page -> site) 토글로 제어
  - 이미지 off면 twitter:card = summary, on이면 summary_large_image
{%- endcomment -%}

<title>
  {%- if page.meta_title -%}
    {{ page.meta_title }}
  {%- elsif page.title -%}
    {{ page.title }} - {{ site.title }}
  {%- else -%}
    {{ site.title }}
  {%- endif -%}
</title>

{%- assign meta_desc = page.meta_description | default: page.description | default: site.description -%}
{%- if meta_desc -%}
  <meta name="description" content="{{ meta_desc | strip_newlines | escape }}" />
{%- endif -%}

{%- assign og_title = page.meta_title | default: page.title | default: site.title -%}
{%- if page.layout == 'post' -%}
  <meta property="og:type" content="article" />
{%- else -%}
  <meta property="og:type" content="website" />
{%- endif -%}
<meta property="og:title" content="{{ og_title | escape }}" />
<meta property="og:site_name" content="{{ site.title | escape }}" />
<meta property="og:url" content="{{ page.url | absolute_url }}" />
{%- if meta_desc -%}
  <meta property="og:description" content="{{ meta_desc | strip_newlines | escape }}" />
{%- endif -%}

{%- assign use_og = page.show_og | default: site.show_og | default: false -%}
{%- if use_og and (page.image or site.seo.meta_og_image) -%}
  {%- assign og_img = page.image | default: site.seo.meta_og_image -%}
  <meta property="og:image" content="{{ og_img | absolute_url }}" />
  <meta property="og:image:alt" content="{{ og_title | escape }}" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="{{ og_img | absolute_url }}" />
{%- else -%}
  <meta name="twitter:card" content="summary" />
{%- endif -%}

<meta name="twitter:title" content="{{ og_title | escape }}" />
{%- if meta_desc -%}<meta name="twitter:description" content="{{ meta_desc | strip_newlines | escape }}" />{%- endif -%}

{%- if site.seo.meta_twitter_site -%}
  <meta name="twitter:site" content="{{ site.seo.meta_twitter_site }}" />
{%- endif -%}
{%- if site.seo.meta_twitter_creator -%}
  <meta name="twitter:creator" content="{{ site.seo.meta_twitter_creator }}" />
{%- endif -%}

<link rel="canonical" href="{{ page.url | absolute_url }}" />
{%- if page.noindex -%}<meta name="robots" content="noindex,nofollow" />{%- endif -%}
{%- if page.date -%}<meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}" />{%- endif -%}
